:root {
  --c-bg: #0E0B14;
  --c-surface: #151022;
  --c-text: #EDEAF3;
  --c-muted: #AAA3BA;
  --c-primary: #5B2C83;
  --c-primary-acc: #A469F7;
  --c-success: #23D18B;
  --c-danger: #FF4D4F;
  --radius: 12px;
  --space: 12px;
  --shadow: 0 10px 30px rgba(0,0,0,.35);
  --focus: 0 0 0 3px rgba(164,105,247,.65);
}

.theme-light {
  --c-bg: #FFFFFF;
  --c-surface: #F6F5FA;
  --c-text: #151022;
  --c-muted: #5B5672;
}

* { box-sizing: border-box; }
html { scroll-behavior: smooth; }
html, body { margin:0; padding:0; height:100%; background: var(--c-bg); color: var(--c-text); font-family: Inter, Rubik, system-ui, -apple-system, Segoe UI, Roboto, Arial, sans-serif; }
body { padding: env(safe-area-inset-top) env(safe-area-inset-right) env(safe-area-inset-bottom) env(safe-area-inset-left); }
img, video { max-width:100%; display:block; }
button { font: inherit; }

.app-header {
  display:flex; justify-content:space-between; align-items:center;
  padding: clamp(10px, 2vw, 20px);
  background: linear-gradient(180deg, rgba(21,16,34,.85), rgba(21,16,34,.35) 60%, transparent);
  position: sticky; top:0; z-index: 50; backdrop-filter: blur(6px);
}
.brand { display:flex; align-items:center; gap:12px; }
.logo { width:36px; height:36px; border-radius:8px; background: radial-gradient(100% 100% at 30% 20%, var(--c-primary-acc), var(--c-primary)); box-shadow: var(--shadow); }
.actions { display:flex; align-items:center; gap:10px; }
.lang-switch { display:flex; gap:6px; }

.btn {
  border: 0; border-radius: 10px; padding: 10px 14px; color: var(--c-text);
  background: color-mix(in oklab, var(--c-primary) 40%, black 60%);
  cursor: pointer; transition: .2s transform, .2s background;
}
.btn:hover { transform: translateY(-1px); }
.btn:focus { outline: none; box-shadow: var(--focus); }
.btn.ghost { background: transparent; border: 1px solid rgba(255,255,255,.1); }
.btn.small { padding: 6px 10px; font-size: 13px; }
.btn.primary { background: linear-gradient(135deg, var(--c-primary), var(--c-primary-acc)); }
.btn.icon { padding: 6px 10px; background: rgba(255,255,255,.08); }
.btn.icon.danger { background: rgba(255, 77, 79, .25); }

.app-main { display:block; }
.hero { position:relative; border-radius: 16px; overflow:hidden; margin: 16px; }
.hero-bg { height: 220px; background: radial-gradient(120% 120% at 20% 10%, rgba(164,105,247,.25), transparent 40%), linear-gradient(180deg, #1b132b, #0E0B14 80%); }
.hero-content { position:absolute; inset: 0; padding: 24px; display:flex; flex-direction:column; gap:12px; justify-content:center; }
.section { padding: 8px 16px 24px; }
.section-title { margin: 12px 0; color: var(--c-muted); font-size: 14px; letter-spacing: .5px; }

.grid {
  display:grid;
  grid-template-columns: repeat(auto-fill, minmax(180px, 1fr));
  gap: 12px;
}
.card {
  background: var(--c-surface); border-radius: 14px; padding: 0; text-align: start;
  border: 1px solid rgba(255,255,255,.06); transition: .2s transform, .2s box-shadow, .2s border;
  color: inherit;
}
.card:focus { outline: none; box-shadow: var(--focus); }
.card:hover { transform: translateY(-2px); }
.card .thumb { height: 96px; border-top-left-radius: 14px; border-top-right-radius: 14px; background: linear-gradient(135deg, #2a1f3e, #1b142c); }
.card .meta { padding: 10px; }
.card .title { font-weight: 600; }
.card .desc { color: var(--c-muted); font-size: 12px; }

.modal.hidden, .drawer.hidden { display: none; }
.modal { position: fixed; inset: 0; display:flex; align-items:center; justify-content:center; z-index: 100; }
.modal-backdrop { position:absolute; inset:0; background: rgba(0,0,0,.5); backdrop-filter: blur(4px); }
.modal-body { position: relative; z-index: 1; width: min(96vw, 1200px); background: #000; border-radius: 14px; overflow:hidden; box-shadow: var(--shadow); }
#player { width: 100%; height: clamp(240px, 56vw, 650px); background: #000; }

.controls {
  position:absolute; left:0; right:0; bottom:0; display:flex; gap:8px; align-items:center;
  padding: 8px; background: linear-gradient(180deg, transparent, rgba(0,0,0,.6) 40%);
}
.select {
  background: rgba(0,0,0,.5); color: #fff; border: 1px solid rgba(255,255,255,.25); border-radius: 8px; padding: 6px 10px;
}

.player-msg {
  position:absolute; top: 16px; left: 16px; right: 16px; background: rgba(21,16,34,.85);
  color: var(--c-text); padding: 10px 12px; border-radius: 10px; border: 1px solid rgba(255,255,255,.1);
}

.drawer { position: fixed; top:0; bottom:0; right:0; width: min(90vw, 420px); background: var(--c-surface); z-index:120; box-shadow: var(--shadow); }
.drawer-body { padding: 18px; display:flex; flex-direction:column; gap:14px; }
.row { display:flex; align-items:center; justify-content:space-between; gap: 8px; background: rgba(255,255,255,.03); padding: 10px 12px; border-radius: 10px; }
.row label { color: var(--c-muted); }

[data-nav]:focus { outline: none; box-shadow: var(--focus); }

/* تحسين تمرير التركيز: إبقاء العناصر المتركزة بعيدًا عن الحواف */
:where(.card, .btn, .select) { scroll-margin: 16px; }

@media (min-width: 1280px) {
  .grid { grid-template-columns: repeat(auto-fill, minmax(220px, 1fr)); }
  .hero-bg { height: 300px; }
}

/* صفوف أفقية مع snap للاستخدام في carousels */
.row-snap { display: flex; overflow-x: auto; scroll-snap-type: x mandatory; gap: 12px; padding: 8px 0; }
.row-snap > * { scroll-snap-align: start; flex: 0 0 auto; }
